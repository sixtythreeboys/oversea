<!DOCTYPE html>
<html>
	<head>
		<title>WebSocket Example</title>
	</head>
	<body>
		<h1>WebSocket Example</h1>
		<div id="messages"></div>

		<script>
			// Create a WebSocket object
			const socket = new WebSocket(
				"ws://15.164.171.244:8000/oversea/socket"
			);

			// Event handler for WebSocket connection established
			socket.onopen = () => {
				console.log("WebSocket connection established!");
				// Send a message to subscribe to a specific rsym
				const subscriptionMessage = JSON.stringify({
					event: "subscribe",
					data: { rsym: "DNASAAPL" },
				});
				socket.send(subscriptionMessage);
			};

			// Event handler for receiving messages from the server
			socket.onmessage = (event) => {
				const messagesDiv = document.getElementById("messages");
				const message = document.createElement("div");
				message.innerText = event.data;
				messagesDiv.appendChild(message);
			};

			// Event handler for WebSocket connection closed
			socket.onclose = () => {
				console.log("WebSocket connection closed!");
			};

			// Event handler for WebSocket connection errors
			socket.onerror = (error) => {
				console.error("WebSocket connection error: " + error.message);
			};
		</script>
	</body>
</html>
